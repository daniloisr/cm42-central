<% content_for :title_bar do %>
  <h1><%= t('edit') %> <%= resource.class.name.humanize %></h1>
<% end %>

<div class="container container-form">
  <%= form_for(
    resource, as: resource_name, url: registration_path(resource_name),
    html: { method: :put, class: 'form-horizontal' }) do |f| %>

    <% # TODO: style these messages %>
    <%= devise_errors %>

    <%= input f, :name %>
    <%= input f, :initials %>
    <%= input f, :username %>
    <%= input f, :email,     type: :email_field %>
    <%= input f, :locale,    type: :select, options: I18n.available_locales, include_blank: true %>
    <%= input f, :time_zone, type: :time_zone_select, options: nil %>
    <%= input f, :password,  type: :password_field, help: t('.leave_blank_if_you_dont_want_to_change_it') %>
    <%= input f, :password_confirmation, type: :password_field %>
    <%= check_box_group(
      f,
      t('.notify_me_when_my_stories_are'),
      {
        email_delivery: t('story.state.delivered'),
        email_acceptance: t('story.state.accepted'),
        email_rejection: t('story.state.rejected')
      })
    %>

    <%= input f, :current_password, type: :password_field, help: t('.we_need_your_current_password_to_confirm_your_changes') %>

    <div class="form-group">
      <div class="col-xs-offset-4 col-xs-8">
        <%= f.submit "Update", class: 'btn btn-primary' %>
        <%= link_to t(".cancel my account"),
          registration_path(resource_name),
          data: { confirm: "Are you sure?" },
          method: :delete,
          class: 'btn btn-danger pull-right' %>
      </div>
    </div>
  <% end %>
</div>
